apply plugin: 'com.android.application'

android {
    compileSdkVersion 21
    buildToolsVersion "23.0.2"

    defaultConfig {
        applicationId "com.klauncher.launcher"
        minSdkVersion 16
        targetSdkVersion 21
        compileOptions {
            sourceCompatibility JavaVersion.VERSION_1_7
            targetCompatibility JavaVersion.VERSION_1_7
        }
    }

    repositories {
        flatDir {
            dirs 'libs'
        }
    }

    productFlavors{
        xiaomi {
            manifestPlaceholders = [CHANNEL_ID: CHANNEL + XIAOMI_ID, WE_OPS_ID: WE_OPS_ID_XMZ]
        }
        huawei {
            manifestPlaceholders = [CHANNEL_ID: CHANNEL + HUAWEI_ID, WE_OPS_ID: WE_OPS_ID_HWS]
        }
        lenovo {
            manifestPlaceholders = [CHANNEL_ID: CHANNEL + LENOVO_ID, WE_OPS_ID: WE_OPS_ID_LK]
        }
        kupai {
            manifestPlaceholders = [CHANNEL_ID: CHANNEL + KUPAI_ID, WE_OPS_ID: WE_OPS_ID_LK]
        }
    }

    sourceSets {
        main {
            jniLibs.srcDirs = ['libs']
            resources.srcDirs = ['src/main/res']
            assets.srcDirs = ['src/main/assets']
            res.srcDirs = ['src/main/res']
        }
        xiaomi {
            assets.srcDirs = ['src/main/assets-xm']
            res.srcDirs += ['src/main/res-xm']
        }
        huawei {
            assets.srcDirs = ['src/main/assets-hw']
            res.srcDirs += ['src/main/res-hw']
        }
        lenovo {
            assets.srcDirs = ['src/main/assets-lx']
            res.srcDirs += ['src/main/res-lx']
        }
        kupai {
            assets.srcDirs = ['src/main/assets-kp']
            res.srcDirs += ['src/main/res-kp']
        }
    }

    lintOptions {
        checkReleaseBuilds false
        // Or, if you prefer, you can continue to check for errors in release builds,
        // but continue the build even when errors are found:
        abortOnError false
    }

    signingConfigs {
        //keystore info
        release {
            storeFile file(STORE_PATH)
            storePassword STORE_PASSWORD
            keyAlias KEY_ALIAS
            keyPassword KEY_PASSWORD
        }
    }

    buildTypes {
        release {
            minifyEnabled true
            zipAlignEnabled true
            shrinkResources true
            signingConfig  signingConfigs.release
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
            buildConfigField "String", "PING_DOMAIN", "\"http://ping.klauncher.com\""
        }
        debug {
            minifyEnabled false
            buildConfigField "String", "PING_DOMAIN", "\"http://test.ping.klauncher.com\""
        }
    }
}

dependencies {
    compile (name: 'delong-reporter', ext: 'aar')
    compile fileTree(dir: 'libs', include: ['*.jar'])
    provided files('dynamic_lib/icu-classes.jar')
    compile project(':theme')
    compile project(':notifier')
    compile 'com.android.support:support-v4:21.0.3'
    compile 'com.android.support:recyclerview-v7:21.0.3'
    compile files('libs/webeye_1.9_39313.jar')
    compile 'com.umeng.analytics:analytics:latest.integration'
}